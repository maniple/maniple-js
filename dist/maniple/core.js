define(["jquery"],function(a){var b=function(){function b(a,b,c){var d;switch(!0){case"timeout"===b||"timeout"===c:d="Timeout error";break;case 0===a.status:d="Unable to connect to server";break;case 403===a.status:d="Forbidden (403)";break;case 404===a.status:d="Not Found (404)";break;case 500===a.status:d="Internal Server Error (500)";break;case"parsererror"===b:d="Invalid JSON response from server";break;case"abort"===b:d="Ajax request aborted";break;case"string"==typeof c.message:d=c.message;break;default:d="Uncaught error: "+a.responseText+" ("+a.status+")"}return d}var c="success",d="fail",e="error";return function(f){var g=f.success,h=f.error,i=f.fail,j=f.token,k=f.data||{};return"undefined"!=typeof j&&("object"==typeof k?k.token=k.token||j:(k=String(k),k="token="+encodeURIComponent(j)+(k.length?"&"+k:""))),delete f.fail,f.success=function(a,b,e){switch(a=a||{},a.status){case c:"function"==typeof g&&g.call(this,a,b,e);break;case d:if("function"==typeof i){i.call(this,a,b,e);break}default:"function"==typeof h&&h.call(this,a,b,e)}},f.error=function(c,d,f){var g;try{g=a.parseJSON(c.responseText)}catch(i){}g=g||{status:e,message:b(c,d,f),data:f},"function"==typeof h&&h.call(this,g,d,c,f)},f.type=f.type||"post",f.data=k,f.dataType="json",a.ajax(f)}}();return{ajax:b}});